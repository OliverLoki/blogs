> **学习过程中主要参考资料**
>
> [1] 《Java设计模式》[耿祥义、张跃平著]
>
> [2]  [尚硅谷Java设计模式（图解+框架源码剖析）](https://www.bilibili.com/video/BV1G4411c7N4?p=8&spm_id_from=pageDriver)

**注：相对于以上资料的完备性，Loki由于个人博客的实用性，对一些内容进行了删改，目标是这篇可以作为设计模式学习使用中可以快速查阅解决问题、同时对面试有帮助的工具文（会保持长期更新）**



**引子**

> ​	**一个好的设计系统往往是易维护、易扩展、易复用的,有过一定代码编写量的程序开发人员,可能会逐渐思考程序设计问题,想知道一些优秀的设计者或团队是怎样设计出一个好的软件系统的。有经验的设计人员或团队知道如何使用面向对象语言编写出易维护、易扩展和易复用的程序代码,《设计模式》一书正是从这些优秀的设计系统中总结出的设计精髓,因此学习好设计模式对提高设计能力无疑是非常有帮助的。尽管GOF之书并没有收集全部的模式(这似乎是不可能的,也是不必要的),但所阐述的23种模式无疑是使用频率最高的模式。**
> **​	设计模式的目的不是针对软件设计和开发中的每个问题都给出解决方案,而是针对某种特定环境中通常都会遇到的某种软件开发问题给出的可重用的一些解决方案,因此学习设计模式不仅可以使我们用好这些成功的模式,更重要的是可以使我们更加深刻地理解面向对象的设计思想,非常有利于我们更好地使用面向对象语言解决设计中的问题。**
>
> ​	**学习设计模式对于进一步学习、理解和掌握框架是非常有帮助的，Java EE中就大量使用了《设计模式》一书中的模式,对于熟悉设计模式的开发人员,很容易理解这些框架的结构,继而很好地使用框架来设计他们的系统。《设计模式》一书所总结的成功模式不仅适合于面向对象语言,其思想及解决问题的方式也适合于任何和设计相关的行业,因此学习掌握设计模式无疑是非常有益的**
>
> ​								**———— 摘录自：《Java设计模式》[耿祥义、张跃平著]**

@[TOC]

# 一、设计模式简介

## 什么是设计模式？

这个术语是由埃里希.伽玛（Erich Gamma）等人在1990年代从建筑设计领域引入到计算机科学领域，在`GoF之书`中是这样定义设计模式的：

> Christopher Alexander说过：每一个模式描述了一个在我们周围不断重复发生的问题以及该问题的解决方案的核心。这样，你就能一次又一次地使用该方案而不必做重复劳动

尽管Alexander所指的是城市和建筑模式，但他的思想也同样适用于面向对象设计模式，只是在面向对象的解决方案里， 我们用对象和接口代替了墙壁和门窗。两类模式的核心都在于提供了相关问题的解决方案。**记录一个模式应该有以下四个要素**

1. **模式名称(pattern name)**

   一个模式的名称应该高度概括该模式的本质，有利于该行业统一术语

2. **问题描述**

   应该在何时使用模式，解释设计问题和问题存在的前因后果，描述在怎样的场景下使用该模式

3. **方案**

   描述设计的组成部分，他们之间的相互关系以及各自的职责和协作方式

4. **效果**

   描述模式的应用效果以及使用模式应当权衡的问题，描述该模式对系统灵活性，复用性，扩充性的影响

==**总结：设计模式是从许多优秀的软件系统中总结出成功的可复用的设计方案**==

## 23个设计模式的来源

目前,被公认在设计模式领域最具影响力的著作是 `Erich Gamma` 、`Richard Helm`、`Ralph Johnson`和`John Vlissides`在1994年合作出版的著作，也就是GOF之书

> 《`Design Patterns: Elements of Reusable Object-Oriented Software`》
>
> (译本《设计模式:可复用的面向对象软件的基本原理》由机械工业出版社在2000年出版)

该书的四位作者在其著作中记录了他们在四年多的工作中所发现的23个模式。四位作者的著作成为空前的畅销书,对软件设计人员学习、掌握和使用设计模式产生了巨大的影响。《设计模式》一书被广大喜爱者呢称为GOF(Gang of Four)之书(四人帮之书),被认为是设计模式领域的奠基之作

自GOF 的《设计模式》出版后,受其影响,陆续出版了许多具有一定影响力的书籍

**书籍推荐**

+ `《Head First Design Pattern》`中译本《Head First 设计模式》

  该书使用Java语言重点讲解GOF之书中的部分模式(13个模式),书中图文并茂,独具匠心的写作风格更是令人耳目一新,语言叙述及结构安排非常适合初学者

## 设计模式的分类

总的来说，设计模式可分为三大类：

- **创建型 (Creation Patterns)**：提供一种 “隐藏了具体创建细节” 的对象创建方式。

- **结构型 (Structual Patterns)**：聚焦于类和对象的组合。

- **行为型 (Behavioral Patterns)**：聚焦于对象之间的通信。

| 创建型                                  | 结构型                                | 行为型                                       |
| --------------------------------------- | ------------------------------------- | -------------------------------------------- |
| 工厂模式 (Factory Pattern)              | 适配器模式 (Adapter Pattern)          | 责任链模式 (Chain of Responsibility Pattern) |
| 原型模式 (Prototype Pattern)            | 桥接模式 (Bridge Pattern)             | 命令模式 (Command Pattern)                   |
| 抽象工厂模式 (Abstract Factory Pattern) | 过滤器模式 (Filter、Criteria Pattern) | 解释器模式 (Interpreter Pattern)             |
| 单例模式 (Singleton Pattern)            | 组合模式 (Composite Pattern)          | 迭代器模式 (Iterator Pattern)                |
| 建造者模式 (Builder Pattern)            | 装饰器模式 (Decorator Pattern)        | 中介者模式 (Mediator Pattern)                |
|                                         | 外观模式 (Facade Pattern)             | 备忘录模式 (Memento Pattern)                 |
|                                         | 享元模式 (Flyweight Pattern)          | 观察者模式 (Observer Pattern)                |
|                                         | 代理模式 (Proxy Pattern)              | 状态模式 (State Pattern)                     |
|                                         |                                       | 空对象模式 (Null Object Pattern)             |
|                                         |                                       | 策略模式 (Strategy Pattern)                  |
|                                         |                                       | 模板模式 (Template Pattern)                  |
|                                         |                                       | 访问者模式 (Visitor Pattern)                 |

# 二、设计模式七大原则

设计模式原则，其实就是程序员在编程时，应当遵守的原则，也是各种设计模式的基础

## 面向对象的 SOLID 原则

开发中我们经常会提到SOLID 原则，它是类设计的五条原则。他们是设计 class 结构时应该遵守的准则和最佳实践

- S 单一职责原则
- O 开闭原则
- L 里氏替换原则
- I 接口隔离原则
- D 依赖倒置原则

:rabbit: Loki会在下文详细整理解释这些原则

## 开闭原则

> **`Open Close Principle`核心思想**

1. 开闭原则是最基础、最重要的设计原则
2. ==一个软件实体如类、模块和函数应该对扩展开放，对修改关闭==
3. 编程中遵循其它原则，以及使用设计模式的目的就是遵循开闭原则

> 如何实现对扩展开放，对修改关闭

要实现这一点，需要对系统进行抽象化设计，抽象可以基于抽象类或者接口

一般来说需要做到几点：
1、通过接口或者抽象类约束扩展，对扩展进行边界限定，不允许出现在接口或抽象类中不存在的public方法，也就是扩展必须添加具体实现而不是改变具体的方法
2、参数类型、引用对象尽量使用接口或者抽象类，而不是实现类，这样就能尽量保证抽象层是稳定的。
3、一般抽象模块设计完成(例如接口的方法已经敲定)，不允许修改接口或者抽象方法的定义

## 里氏代换原则

> **`Liskov Substitution Principle`核心思想**

==所有引用基类的地方必须能透明地使用其子类的对象==

**如何正确使用继承？=>里氏替换原则**

任何基类可以出现的地方，子类一定可以出现。里氏替换原则是继承复用的基石，只有当衍生类可以替换基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为

> 里氏代换原则是对**开闭原则**的补充

实现**开闭原则**的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏替换原则是对实现抽象化的具体步骤的规范。里氏替换原则中，**子类对父类的方法尽量不要重写和重载**。因为父类代表了定义好的结构，通过这个规范的接口与外界交互，子类不应该随便破坏它。

## 单一职责原则

> **`Single Responsibility Principle`核心思想**

==一个类只负责一个功能领域中相应的职责，此原则的核心就是解耦和增强内聚性==

如果一个类承担的职责过多，就等于把这些职责耦合在一起，一个职责的变化可能会削弱或者抑制这个类完成其他职责的能力。这种耦合会导致脆弱的设计，当变化发生时，设计会遭受到意想 不到的破坏

## 依赖倒转原则

> **`Dependence Inversion Principle`核心思想**

==面向接口编程，依赖于抽象而不依赖于具体。写代码时用到具体类时，不与具体类交互，而与具体类的上层接口交互==

1. 高层模块不应该依赖低层模块，二者都应该依赖其抽象
2. 抽象不应该依赖细节，细节应该依赖抽象
3. 依赖倒转（倒置）的中心思想是面向接口编程
4. 依赖倒转原则是基于这样的设计理念：相对于细节的多变性，抽象的东西要稳定的多。以抽象为基础搭建的架构比以细节为基础的架构要稳定的多。在java中，抽象指的是接口或抽象类，细节就是具体的实现类
5. 使用接口或抽象类的目的是制定好规范，而不涉及任何具体的操作，把展现细节的任务交给他们的实现类去完成

## 接口隔离原则

> **`Interface Segregation Principle`核心思想**

==客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小的接口上==

每个接口中不存在子类用不到却必须实现的方法，如果不然，就要将接口拆分。使用多个隔离的接口，比使用单个接口（多个接口方法集合到一个的接口）要好

> **如何看待接口隔离原则和单一职责原则**

单一职责原则注重的是类和接口的职责单一，这里职责是从业务逻辑上划分的，但是在接口隔离原则要求当一个接口太大时，我们需要将它分割成一些更细小的接口，使用该接口的客户端仅需知道与之相关的方法即可。也就是说，我们在设计接口的时候有可能满足单一职责原则但是不满足接口隔离原则

## 迪米特法则/最少知道原则

> **`Demeter Principle`核心思想**

==迪米特法则的核心观念就是类间解耦，也就降低类之间的耦合，只有类处于弱耦合状态，类的复用率才会提高==

一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立

一个类对自己依赖的类知道的越少越好。无论被依赖的类多么复杂，都应该将逻辑封装在方法的内部，通过public方法提供给外部。这样当被依赖的类变化时，才能最小的影响该类。

> **迪米特法则的规则**

- Only talk to your immediate friends(只与直接的朋友通讯)，一个对象的"朋友"包括他本身(this)、它持有的成员对象、入参对象、它所创建的对象。
- 尽量少发布public的变量和方法，一旦公开的属性和方法越多，修改的时候影响的范围越大。
- “是自己的就是自己的”，如果一个方法放在本类中，既不产生新的类间依赖，也不造成负面的影响，那么次方法就应该放在本类中。

## 合成复用原则 

> **`Composite Reuse Principle`核心思想**

==尽量使用对象组合/聚合，而不是继承关系达到软件复用的目的==

> 对合成和聚合的理解

**聚合(Aggregate)的概念**

聚合表示一种弱的"拥有"关系，一般表现为松散的整体和部分的关系，其实，所谓整体和部分也可以是完全不相关的。例如A对象持有B对象，B对象并不是A对象的一部分，也就是B对象的生命周期是B对象自身管理，和A对象不相关。

**合成(Composite)的概念**

合成表示一种强的"拥有"关系，一般表现为严格的整体和部分的关系，部分和整体的生命周期是一样的



# 三、UML类图的学习

学习类图对于学习设计模式有很大的帮助，请参照Loki的另一篇文章

[UML概述及UML类图详解](https://blog.csdn.net/Night__breeze/article/details/124285580?spm=1001.2014.3001.5501)



# 四、学习23种设计模式

## 单例模式

[Java设计模式之单例模式](https://blog.csdn.net/Night__breeze/article/details/124413246)

## 工厂模式

## 装饰模式



## 策略模式



## 代理模式



## 观察者模式



## 外观模式



## 适配器模式



## 责任链模式

















































































